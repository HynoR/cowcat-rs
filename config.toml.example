[server]
listen = "0.0.0.0:8080"

[pow]
difficulty = 3
cookie_expire_hours = 24
salt = "awgawmlfa"
workers = 4
worker_type = "wasm"
ip_policy = "none"
test_mode = false
# Optional: override cowcat images with local files.
# cowcat_image1_path = "/path/to/cowcat1.webp"
# cowcat_image2_path = "/path/to/cowcat2.webp"

[proxy]
target = "http://127.0.0.1:1234"

[[proxy.host_rule]]
host = "example.com"
target = "http://127.0.0.1:8081"

[rules]
enabled = true
default_action = "challenge"

[[rules.rule]]
name = "acme-http01"
path_prefix = "/.well-known/acme-challenge/"
action = "allow"

[[rules.rule]]
name = "uptime-bot"
header = { name = "User-Agent", contains = "UptimeRobot" }
action = "challenge"
difficulty_delta = -2

[[rules.rule]]
name = "block-admin"
path_prefix = "/admin"
action = "block"
